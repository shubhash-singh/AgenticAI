{
  "index.html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Time & Pendulums - Interactive Simulation</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n            line-height: 1.6;\n            color: #333333;\n            background: #f9f9f9;\n        }\n        #app {\n            max-width: 600px;\n            margin: 0 auto;\n            padding: 16px;\n            background: white;\n            min-height: 100vh;\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\n        }\n        header {\n            padding: 16px 0;\n            text-align: center;\n            border-bottom: 2px solid #e0e0e0;\n        }\n        h1 { font-size: 24px; margin-bottom: 8px; color: #333333; }\n        .subtitle { font-size: 14px; color: #666; }\n\n        #visual-area {\n            position: relative;\n            height: 50vh;\n            min-height: 300px;\n            background: #F8F8F8;\n            border-radius: 8px;\n            margin: 16px 0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            overflow: hidden;\n            border: 1px solid #e0e0e0;\n        }\n\n        #controls {\n            padding: 16px;\n            background: #fafafa;\n            border-radius: 8px;\n            margin: 16px 0;\n            border: 1px solid #e0e0e0;\n        }\n\n        .control-group {\n            margin: 16px 0;\n        }\n\n        .control-label {\n            display: flex;\n            justify-content: space-between;\n            margin-bottom: 8px;\n            font-weight: 500;\n            font-size: 16px;\n        }\n\n        input[type=\"range\"] {\n            width: 100%;\n            height: 44px;\n            cursor: pointer;\n            -webkit-appearance: none;\n            background: #ddd;\n            border-radius: 5px;\n            outline: none;\n            transition: background 0.2s;\n        }\n\n        input[type=\"range\"]::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            appearance: none;\n            width: 25px;\n            height: 25px;\n            border-radius: 50%;\n            background: #3498DB;\n            cursor: pointer;\n        }\n\n        input[type=\"range\"]::-moz-range-thumb {\n            width: 25px;\n            height: 25px;\n            border-radius: 50%;\n            background: #3498DB;\n            cursor: pointer;\n        }\n\n        button {\n            width: 100%;\n            min-height: 48px;\n            padding: 12px;\n            font-size: 16px;\n            background: #2ECC71; /* Green for Start */\n            color: white;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n            margin: 8px 0;\n            transition: background-color 0.2s ease, transform 0.1s ease;\n        }\n\n        button:active {\n            transform: scale(0.98);\n        }\n\n        button:disabled {\n            background-color: #cccccc;\n            cursor: not-allowed;\n        }\n\n        #info {\n            padding: 16px;\n            background: #e3f2fd; /* Light blue */\n            border-radius: 8px;\n            margin: 16px 0;\n            border: 1px solid #c1e4fa;\n        }\n\n        #info h3 {\n            font-size: 18px;\n            margin-bottom: 8px;\n            color: #333333;\n        }\n        #info p {\n            font-size: 16px;\n            margin-bottom: 4px;\n            color: #333333;\n        }\n        #pendulumBob {\n            fill: #3498DB; /* Blue bob */\n            transition: fill 0.1s ease-in-out; /* For the tick feedback */\n        }\n    </style>\n</head>\n<body>\n    <div id=\"app\">\n        <header>\n            <h1>Time & Pendulums</h1>\n            <p class=\"subtitle\">Explore how pendulums measure time!</p>\n        </header>\n\n        <div id=\"visual-area\">\n            <svg id=\"pendulum-svg\" viewBox=\"0 0 400 400\" style=\"width: 90%; max-width: 400px; height: auto;\">\n                <!-- Pivot Point -->\n                <circle id=\"pendulumPivot\" cx=\"200\" cy=\"50\" r=\"5\" fill=\"#333333\"></circle>\n                <!-- Pendulum String -->\n                <line id=\"pendulumString\" x1=\"200\" y1=\"50\" x2=\"200\" y2=\"175\" stroke=\"#333333\" stroke-width=\"2\"></line>\n                <!-- Pendulum Bob -->\n                <circle id=\"pendulumBob\" cx=\"200\" cy=\"175\" r=\"15\"></circle>\n            </svg>\n        </div>\n\n        <div id=\"controls\">\n            <div class=\"control-group\">\n                <label for=\"lengthSlider\" class=\"control-label\">\n                    Pendulum Length: <span id=\"lengthValue\">5.0 arbitrary units</span>\n                </label>\n                <input type=\"range\" id=\"lengthSlider\" min=\"1\" max=\"10\" value=\"5\" step=\"0.1\">\n            </div>\n            <div class=\"control-group\">\n                <label for=\"oscCountSlider\" class=\"control-label\">\n                    Oscillations to Observe: <span id=\"oscCountValue\">20 oscillations</span>\n                </label>\n                <input type=\"range\" id=\"oscCountSlider\" min=\"5\" max=\"50\" value=\"20\" step=\"1\">\n            </div>\n            <button id=\"startResetButton\">Start</button>\n        </div>\n\n        <div id=\"info\">\n            <h3>Results:</h3>\n            <p>Total Time: <span id=\"totalTime\">0.0</span> seconds</p>\n            <p>Completed Oscillations: <span id=\"completedOscillations\">0</span></p>\n            <p>Time Period (T): <span id=\"timePeriod\">N/A</span></p>\n            <p>Projected Time Period: <span id=\"projectedTimePeriod\">N/A</span></p>\n            <p style=\"font-size: 14px; margin-top: 10px; color: #666;\">Adjust pendulum length and oscillations. Press 'Start' to measure time period!</p>\n        </div>\n    </div>\n\n    <script>\n        // Constants & DOM Elements\n        const visualArea = document.getElementById('visual-area');\n\n        const lengthSlider = document.getElementById('lengthSlider');\n        const lengthValueDisplay = document.getElementById('lengthValue');\n        const oscCountSlider = document.getElementById('oscCountSlider');\n        const oscCountValueDisplay = document.getElementById('oscCountValue');\n        const startResetButton = document.getElementById('startResetButton');\n\n        const totalTimeDisplay = document.getElementById('totalTime');\n        const completedOscillationsDisplay = document.getElementById('completedOscillations');\n        const timePeriodDisplay = document.getElementById('timePeriod');\n        const projectedTimePeriodDisplay = document.getElementById('projectedTimePeriod');\n\n        // SVG Elements\n        const pendulumString = document.getElementById('pendulumString');\n        const pendulumBob = document.getElementById('pendulumBob');\n\n        // Simulation state variables\n        let currentPendulumLengthRaw = parseFloat(lengthSlider.value); // Raw value from slider (1-10)\n        let currentPendulumLengthPx = currentPendulumLengthRaw * 25; // Mapped to pixels for SVG (25px-250px)\n        let targetOscillations = parseInt(oscCountSlider.value);\n        let simulationRunning = false;\n        let animationFrameId = null;\n\n        let animationStartTime = 0; // Timestamp when 'Start' was pressed\n        let totalElapsedTime = 0; // Cumulative time in seconds\n        let completedOscillations = 0;\n\n        let theoreticalPendulumPeriod = 0; // T = 2π√(L/g_eff)\n        // Arbitrary value chosen such that L=125px (raw 5) gives T=2s (for observation convenience)\n        const G_EFFECTIVE = 125 * Math.PI * Math.PI / (2 * 2); // 2 = 2PI * sqrt(125/G_EFF) -> G_EFF = 125 * PI^2\n        const MAX_ANGLE = Math.PI / 6; // 30 degrees amplitude, represents a 'small angle swing'\n\n        // Functions\n        function calculateTheoreticalPeriod(lengthPx) {\n            // T = 2π * sqrt(L_px / g_eff)\n            if (lengthPx <= 0) return 0; // Prevent division by zero or negative sqrt\n            return 2 * Math.PI * Math.sqrt(lengthPx / G_EFFECTIVE);\n        }\n\n        function updatePendulumVisual(lengthPx, angle) {\n            // Update SVG string and bob position based on length and angle\n            // SVG pivot is at (200, 50) in a 400x400 viewBox\n            const pivotX = 200;\n            const pivotY = 50;\n\n            const bobX = pivotX + lengthPx * Math.sin(angle);\n            const bobY = pivotY + lengthPx * Math.cos(angle);\n\n            pendulumString.setAttribute('x1', pivotX);\n            pendulumString.setAttribute('y1', pivotY);\n            pendulumString.setAttribute('x2', bobX);\n            pendulumString.setAttribute('y2', bobY);\n\n            pendulumBob.setAttribute('cx', bobX);\n            pendulumBob.setAttribute('cy', bobY);\n        }\n\n        function animatePendulum(timestamp) {\n            try {\n                if (!animationStartTime) {\n                    animationStartTime = timestamp;\n                }\n\n                totalElapsedTime = (timestamp - animationStartTime) / 1000; // in seconds\n\n                const t = totalElapsedTime;\n                const T = theoreticalPendulumPeriod; // Use the current theoretical period for animation speed\n\n                if (T <= 0 || isNaN(T)) { // Safety check for invalid period\n                    stopSimulation(false);\n                    return;\n                }\n\n                // Angle calculation based on time and period\n                // Pendulum starts from right extreme (MAX_ANGLE) using Math.cos\n                const angle = MAX_ANGLE * Math.cos((2 * Math.PI * t) / T);\n                updatePendulumVisual(currentPendulumLengthPx, angle);\n\n                // Oscillation counting: A full oscillation is when (t / T) increments by 1.\n                const newCompletedOscillations = Math.floor(t / T);\n                if (newCompletedOscillations > completedOscillations && completedOscillations < targetOscillations) {\n                    completedOscillations = newCompletedOscillations;\n                    completedOscillationsDisplay.textContent = completedOscillations;\n\n                    // Subtle tick feedback (bob color change)\n                    pendulumBob.style.fill = '#E74C3C'; // temporary highlight (red)\n                    setTimeout(() => {\n                        if (simulationRunning) { // Only revert if simulation is still active\n                            pendulumBob.style.fill = '#3498DB'; // revert to blue\n                        }\n                    }, 100); // Flash for 100ms\n                }\n\n                // Update real-time total time\n                totalTimeDisplay.textContent = totalElapsedTime.toFixed(1);\n\n                if (completedOscillations < targetOscillations) {\n                    animationFrameId = requestAnimationFrame(animatePendulum);\n                } else {\n                    stopSimulation(true); // Simulation finished naturally\n                }\n            } catch (error) {\n                console.error(\"Animation error:\", error);\n                stopSimulation(false); // Stop simulation on error\n            }\n        }\n\n        function startSimulation() {\n            simulationRunning = true;\n            startResetButton.textContent = 'Reset';\n            startResetButton.style.backgroundColor = '#E74C3C'; // Red\n            lengthSlider.disabled = true;\n            oscCountSlider.disabled = true;\n\n            // Reset values for a new run\n            animationStartTime = 0;\n            totalElapsedTime = 0;\n            completedOscillations = 0;\n            totalTimeDisplay.textContent = '0.0';\n            completedOscillationsDisplay.textContent = '0';\n            timePeriodDisplay.textContent = 'N/A';\n            projectedTimePeriodDisplay.textContent = 'N/A'; // Hide projected during run\n\n            // Start animation\n            animationFrameId = requestAnimationFrame(animatePendulum);\n        }\n\n        function stopSimulation(finishedNaturally = false) {\n            simulationRunning = false;\n            startResetButton.textContent = 'Start';\n            startResetButton.style.backgroundColor = '#2ECC71'; // Green\n            lengthSlider.disabled = false;\n            oscCountSlider.disabled = false;\n\n            if (animationFrameId) {\n                cancelAnimationFrame(animationFrameId);\n                animationFrameId = null;\n            }\n\n            if (finishedNaturally && completedOscillations > 0) {\n                // Calculate and display final results\n                const finalTimePeriod = totalElapsedTime / completedOscillations;\n                timePeriodDisplay.textContent = finalTimePeriod.toFixed(1) + ' seconds/oscillation';\n            } else {\n                // Reset everything if stopped manually or finished with 0 oscillations\n                totalElapsedTime = 0;\n                completedOscillations = 0;\n                totalTimeDisplay.textContent = '0.0';\n                completedOscillationsDisplay.textContent = '0';\n                timePeriodDisplay.textContent = 'N/A';\n            }\n            // Always re-display projected after stopping\n            updateProjectedTimePeriod();\n            // Ensure bob color is reset if simulation stopped during highlight\n            pendulumBob.style.fill = '#3498DB';\n        }\n\n        function updateProjectedTimePeriod() {\n            if (!simulationRunning) {\n                theoreticalPendulumPeriod = calculateTheoreticalPeriod(currentPendulumLengthPx);\n                projectedTimePeriodDisplay.textContent = theoreticalPendulumPeriod.toFixed(2) + ' seconds';\n            }\n        }\n\n        // Event Listeners\n        lengthSlider.addEventListener('input', (e) => {\n            currentPendulumLengthRaw = parseFloat(e.target.value);\n            currentPendulumLengthPx = currentPendulumLengthRaw * 25; // Map to pixels\n            lengthValueDisplay.textContent = currentPendulumLengthRaw.toFixed(1) + ' arbitrary units';\n            updatePendulumVisual(currentPendulumLengthPx, MAX_ANGLE); // Update visual to max angle for consistency\n            updateProjectedTimePeriod();\n        });\n\n        oscCountSlider.addEventListener('input', (e) => {\n            targetOscillations = parseInt(e.target.value);\n            oscCountValueDisplay.textContent = targetOscillations + ' oscillations';\n        });\n\n        startResetButton.addEventListener('click', () => {\n            if (simulationRunning) {\n                stopSimulation(false); // Manually reset\n            } else {\n                startSimulation();\n            }\n        });\n\n        // Initial Setup\n        function initializeSimulation() {\n            lengthValueDisplay.textContent = currentPendulumLengthRaw.toFixed(1) + ' arbitrary units';\n            oscCountValueDisplay.textContent = targetOscillations + ' oscillations';\n\n            // Set initial pendulum state (at one extreme for visual clarity, ready to swing)\n            updatePendulumVisual(currentPendulumLengthPx, MAX_ANGLE); \n            updateProjectedTimePeriod();\n        }\n\n        initializeSimulation();\n    </script>\n</body>\n</html>"
}